{"ast":null,"code":"import _defineProperty from \"/mnt/sda1/Documents/react-redux-login-signup-form/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/mnt/sda1/Documents/react-redux-login-signup-form/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/mnt/sda1/Documents/react-redux-login-signup-form/src/components/SignupForm.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n// libraries\nimport React, { useState, useEffect } from \"react\";\nimport { bindActionCreators } from \"redux\";\nimport { makeStyles, createStyles } from \"@material-ui/core\"; // colors\n\nimport { green } from \"@material-ui/core/colors\"; // hoc\n\nimport { connect } from \"react-redux\"; // components\n\nimport { FormControl, FormGroup, FormControlLabel, Checkbox, InputAdornment, IconButton, Button, CircularProgress } from \"@material-ui/core\";\nimport { ValidatorForm, TextValidator } from \"react-material-ui-form-validator\"; // icons\n\nimport { Visibility, VisibilityOff } from \"@material-ui/icons\"; // actions\n\nimport { userActions } from \"../actions\"; // types\n\n// styles\nconst useStyles = makeStyles(theme => createStyles({\n  root: {\n    display: \"flex\",\n    alignItems: \"center\"\n  },\n  wrapper: {\n    margin: theme.spacing(1),\n    position: \"relative\"\n  },\n  buttonProgress: {\n    color: green[500],\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"50%\",\n    marginTop: -12,\n    marginLeft: -12\n  }\n}));\n\nconst SignupForm = props => {\n  const classes = useStyles();\n\n  const _useState = useState({\n    fullName: \"\",\n    email: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n    terms: false\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        values = _useState2[0],\n        setValues = _useState2[1]; // handle fields change event\n\n\n  const handleChange = prop => event => {\n    prop === \"terms\" ? setValues(_objectSpread({}, values, {\n      [prop]: event.target.checked\n    })) : setValues(_objectSpread({}, values, {\n      [prop]: event.target.value\n    }));\n  }; // handle password field\n\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        showPassword = _useState4[0],\n        setShowPassword = _useState4[1];\n\n  const handlePasswordToggle = () => {\n    setShowPassword(!showPassword);\n  };\n\n  const handleMouseDownPassword = event => {\n    event.preventDefault();\n  }; // handle form submit\n\n\n  const handleSubmit = event => {\n    event.preventDefault();\n\n    if (values.terms) {\n      props.register(values);\n    } else {\n      // show error\n      alert(\"Please agree to terms and conditions first\");\n    }\n  };\n\n  useEffect(() => {\n    // onComponentDidMount\n    ValidatorForm.addValidationRule(\"isPasswordMatch\", value => {\n      if (value !== values.password) {\n        return false;\n      }\n\n      return true;\n    });\n    ValidatorForm.addValidationRule(\"minLength\", value => {\n      if (value.length < 5) {\n        return false;\n      }\n\n      return true;\n    });\n    return () => {\n      // onComponentUnmount\n      ValidatorForm.removeValidationRule(\"isPasswordMatch\");\n      ValidatorForm.removeValidationRule(\"minLength\");\n    };\n  }, [values.password]);\n  return React.createElement(ValidatorForm, {\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, React.createElement(FormGroup, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, React.createElement(FormControl, {\n    margin: \"dense\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, React.createElement(TextValidator, {\n    label: \"Full Name\",\n    onChange: handleChange(\"fullName\"),\n    name: \"fullName\",\n    value: values.fullName,\n    validators: [\"required\"],\n    errorMessages: [\"this field is required.\"],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  })), React.createElement(FormControl, {\n    margin: \"dense\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, React.createElement(TextValidator, {\n    label: \"Email address\",\n    onChange: handleChange(\"email\"),\n    name: \"email\",\n    value: values.email,\n    validators: [\"required\", \"isEmail\"],\n    errorMessages: [\"this field is required.\", \"email is not valid.\"],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  })), React.createElement(FormControl, {\n    margin: \"dense\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, React.createElement(TextValidator, {\n    label: \"Password\",\n    type: showPassword ? \"text\" : \"password\",\n    value: values.password,\n    onChange: handleChange(\"password\"),\n    name: \"password\",\n    validators: [\"required\", \"minLength:5\"],\n    errorMessages: [\"this field is required.\", \"password should be at least 5 characters.\"],\n    InputProps: {\n      endAdornment: React.createElement(InputAdornment, {\n        position: \"end\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(IconButton, {\n        \"aria-label\": \"toggle password visibility\",\n        onClick: handlePasswordToggle,\n        onMouseDown: handleMouseDownPassword,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, showPassword ? React.createElement(Visibility, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }) : React.createElement(VisibilityOff, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      })))\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  })), React.createElement(FormControl, {\n    margin: \"dense\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191\n    },\n    __self: this\n  }, React.createElement(TextValidator, {\n    label: \"Confirm password\",\n    type: showPassword ? \"text\" : \"password\",\n    value: values.confirmPassword,\n    onChange: handleChange(\"confirmPassword\"),\n    name: \"confirmPassword\",\n    validators: [\"required\", \"isPasswordMatch\"],\n    errorMessages: [\"this field is required.\", \"password mismatch.\"],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192\n    },\n    __self: this\n  })), React.createElement(FormControlLabel, {\n    control: React.createElement(Checkbox, {\n      checked: values.terms,\n      onChange: handleChange(\"terms\"),\n      value: \"terms\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }),\n    label: \"Agreed to terms and conditions?\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204\n    },\n    __self: this\n  }), React.createElement(FormControl, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216\n    },\n    __self: this\n  }, React.createElement(FormControl, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217\n    },\n    __self: this\n  }, React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"contained\",\n    type: \"submit\",\n    disabled: props.reg.registering,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218\n    },\n    __self: this\n  }, \"Signup\"), props.reg.registering && React.createElement(CircularProgress, {\n    size: 24,\n    className: classes.buttonProgress,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227\n    },\n    __self: this\n  })))));\n};\n\nconst mapStateToProps = state => ({\n  reg: state.registration\n});\n\nconst mapDispatchToProps = dispatch => ({\n  register: bindActionCreators(userActions.register, dispatch)\n});\n\nconst connectedSignupForm = connect(mapStateToProps, mapDispatchToProps)(SignupForm);\nexport { connectedSignupForm as SignupForm };","map":{"version":3,"sources":["/mnt/sda1/Documents/react-redux-login-signup-form/src/components/SignupForm.tsx"],"names":["React","useState","useEffect","bindActionCreators","makeStyles","createStyles","green","connect","FormControl","FormGroup","FormControlLabel","Checkbox","InputAdornment","IconButton","Button","CircularProgress","ValidatorForm","TextValidator","Visibility","VisibilityOff","userActions","useStyles","theme","root","display","alignItems","wrapper","margin","spacing","position","buttonProgress","color","top","left","marginTop","marginLeft","SignupForm","props","classes","fullName","email","password","confirmPassword","terms","values","setValues","handleChange","prop","event","target","checked","value","showPassword","setShowPassword","handlePasswordToggle","handleMouseDownPassword","preventDefault","handleSubmit","register","alert","addValidationRule","length","removeValidationRule","endAdornment","reg","registering","mapStateToProps","state","registration","mapDispatchToProps","dispatch","connectedSignupForm"],"mappings":"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","sourcesContent":["// libraries\nimport React, { useState, useEffect } from \"react\";\nimport { ThunkDispatch } from \"redux-thunk\";\nimport { bindActionCreators } from \"redux\";\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core\";\n\n// colors\nimport { green } from \"@material-ui/core/colors\";\n\n// hoc\nimport { connect } from \"react-redux\";\n\n// components\nimport {\n  FormControl,\n  FormGroup,\n  FormControlLabel,\n  Checkbox,\n  InputAdornment,\n  IconButton,\n  Button,\n  CircularProgress\n} from \"@material-ui/core\";\nimport { ValidatorForm, TextValidator } from \"react-material-ui-form-validator\";\n\n// icons\nimport { Visibility, VisibilityOff } from \"@material-ui/icons\";\n\n// actions\nimport { userActions } from \"../actions\";\n\n// types\nimport { AppState } from \"../reducers\";\nimport { AppActions, RegisterState } from \"../types\";\n\n// styles\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: \"flex\",\n      alignItems: \"center\"\n    },\n    wrapper: {\n      margin: theme.spacing(1),\n      position: \"relative\"\n    },\n    buttonProgress: {\n      color: green[500],\n      position: \"absolute\",\n      top: \"50%\",\n      left: \"50%\",\n      marginTop: -12,\n      marginLeft: -12\n    }\n  })\n);\n\ntype SignupFormState = {\n  fullName: string;\n  email: string;\n  password: string;\n  confirmPassword: string;\n  terms: boolean;\n};\n\ntype Props = LinkDispatchToProps & LinkStateToProps;\n\nconst SignupForm: React.FC<Props> = (props: Props) => {\n  const classes = useStyles();\n\n  const [values, setValues] = useState<SignupFormState>({\n    fullName: \"\",\n    email: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n    terms: false\n  });\n\n  // handle fields change event\n  const handleChange = (prop: keyof SignupFormState) => (\n    event: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    prop === \"terms\"\n      ? setValues({ ...values, [prop]: event.target.checked })\n      : setValues({ ...values, [prop]: event.target.value });\n  };\n\n  // handle password field\n  const [showPassword, setShowPassword] = useState(false);\n  const handlePasswordToggle = () => {\n    setShowPassword(!showPassword);\n  };\n  const handleMouseDownPassword = (\n    event: React.MouseEvent<HTMLButtonElement>\n  ) => {\n    event.preventDefault();\n  };\n\n  // handle form submit\n  const handleSubmit = (event: any) => {\n    event.preventDefault();\n\n    if (values.terms) {\n      props.register(values);\n    } else {\n      // show error\n      alert(\"Please agree to terms and conditions first\");\n    }\n  };\n\n  useEffect(() => {\n    // onComponentDidMount\n    ValidatorForm.addValidationRule(\"isPasswordMatch\", value => {\n      if (value !== values.password) {\n        return false;\n      }\n      return true;\n    });\n\n    ValidatorForm.addValidationRule(\"minLength\", value => {\n      if (value.length < 5) {\n        return false;\n      }\n      return true;\n    });\n\n    return () => {\n      // onComponentUnmount\n      ValidatorForm.removeValidationRule(\"isPasswordMatch\");\n      ValidatorForm.removeValidationRule(\"minLength\");\n    };\n  }, [values.password]);\n\n  return (\n    <ValidatorForm onSubmit={handleSubmit}>\n      <FormGroup>\n        {/* full name input field */}\n        <FormControl margin=\"dense\">\n          <TextValidator\n            label=\"Full Name\"\n            onChange={handleChange(\"fullName\")}\n            name=\"fullName\"\n            value={values.fullName}\n            validators={[\"required\"]}\n            errorMessages={[\"this field is required.\"]}\n          />\n        </FormControl>\n\n        {/* email input field */}\n        <FormControl margin=\"dense\">\n          <TextValidator\n            label=\"Email address\"\n            onChange={handleChange(\"email\")}\n            name=\"email\"\n            value={values.email}\n            validators={[\"required\", \"isEmail\"]}\n            errorMessages={[\"this field is required.\", \"email is not valid.\"]}\n          />\n        </FormControl>\n\n        {/* password input field */}\n        <FormControl margin=\"dense\">\n          <TextValidator\n            label=\"Password\"\n            type={showPassword ? \"text\" : \"password\"}\n            value={values.password}\n            onChange={handleChange(\"password\")}\n            name=\"password\"\n            validators={[\"required\", \"minLength:5\"]}\n            errorMessages={[\n              \"this field is required.\",\n              \"password should be at least 5 characters.\"\n            ]}\n            InputProps={{\n              endAdornment: (\n                <InputAdornment position=\"end\">\n                  <IconButton\n                    aria-label=\"toggle password visibility\"\n                    onClick={handlePasswordToggle}\n                    onMouseDown={handleMouseDownPassword}\n                  >\n                    {showPassword ? <Visibility /> : <VisibilityOff />}\n                  </IconButton>\n                </InputAdornment>\n              )\n            }}\n          />\n        </FormControl>\n\n        {/* confirm password input field */}\n        <FormControl margin=\"dense\">\n          <TextValidator\n            label=\"Confirm password\"\n            type={showPassword ? \"text\" : \"password\"}\n            value={values.confirmPassword}\n            onChange={handleChange(\"confirmPassword\")}\n            name=\"confirmPassword\"\n            validators={[\"required\", \"isPasswordMatch\"]}\n            errorMessages={[\"this field is required.\", \"password mismatch.\"]}\n          />\n        </FormControl>\n\n        {/* remember me input */}\n        <FormControlLabel\n          control={\n            <Checkbox\n              checked={values.terms}\n              onChange={handleChange(\"terms\")}\n              value=\"terms\"\n            />\n          }\n          label=\"Agreed to terms and conditions?\"\n        />\n\n        {/* submit form button */}\n        <FormControl>\n          <FormControl>\n            <Button\n              color=\"secondary\"\n              variant=\"contained\"\n              type=\"submit\"\n              disabled={props.reg.registering}\n            >\n              Signup\n            </Button>\n            {props.reg.registering && (\n              <CircularProgress size={24} className={classes.buttonProgress} />\n            )}\n          </FormControl>\n        </FormControl>\n      </FormGroup>\n    </ValidatorForm>\n  );\n};\n\ninterface LinkStateToProps {\n  reg: RegisterState;\n}\n\ninterface LinkDispatchToProps {\n  register: ({\n    fullName,\n    email,\n    password\n  }: {\n    fullName: string;\n    email: string;\n    password: string;\n  }) => void;\n}\n\nconst mapStateToProps = (state: AppState): LinkStateToProps => ({\n  reg: state.registration\n});\n\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<any, any, AppActions>\n): LinkDispatchToProps => ({\n  register: bindActionCreators(userActions.register, dispatch)\n});\n\nconst connectedSignupForm = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(SignupForm);\nexport { connectedSignupForm as SignupForm };\n"]},"metadata":{},"sourceType":"module"}